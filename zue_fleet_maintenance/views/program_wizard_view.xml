<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="view_program_wizard_tree">
            <field name="name">program.wizard.tree</field>
            <field name="model">program.wizard</field>
            <field name="arch" type="xml">
                <tree string="Program" editable="bottom"> 
                    <field name="vehicle_id" readonly="1"/>
                    <field name="movil_nro" readonly="1"/>
                    <field name="workorder_id" readonly="1"/>
                    <field name="workorder_state" readonly="1"/> 
                    <field name="end_date_execution_wo" readonly="1"/> 
                    <field name="odometer_last_execute" readonly="1"/>
                    <field name="days_last_revision"/>
                    <field name="routines_id"  readonly="1"/>
                    <field name="trigger_qty" readonly="1"/>
                    <field name="trigger_type" readonly="1"/>
                    <field name="start_programmed_date"/>
                    <field name="odometer_vehicle" readonly="1"/>
                    <field name="daily_average" readonly="1"/>
                    <field name="garage_id" domain="[('branch_id','=',branch_id)]"/>
                    <field name="location_id"  domain="[('garage_id','=',garage_id)]"/>
                    <field name="vehicle_state" readonly="1"/>
                    <field name="service_type_id" readonly="1"/>
                    <field name="brand_id" readonly="1"/>
                    <field name="vehiculo_linea_id" readonly="1" domain="[('marca','=',brand_id)]"/>
                    <field name="branch_id" invisible="1"/>
                    <field name="programming_range" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_program_wizard_form"> 
            <field name="name">program.wizard.form</field>
            <field name="model">program.wizard</field>
            <field name="arch" type="xml">
            <form>
                <sheet>
                    <separator/>
                    <group>
                        <field name="workorder_id" readonly="1"/>
                        <field name="workorder_state" readonly="1"/>
                        <field name="end_date_execution_wo" readonly="1"/>
                        <field name="start_programmed_date"/>
                        <field name="days_last_revision"/>
                        <field name="routines_id"  readonly="1"/>
                        <field name="trigger_qty" readonly="1"/>
                        <field name="trigger_type" readonly="1"/>
                        <field name="garage_id" domain="[('branch_id','=',branch_id)]"/>
                        <field name="location_id"  domain="[('garage_id','=',garage_id)]"/>
                        <field name="vehicle_id" readonly="1"/>
                        <field name="movil_nro" readonly="1"/>
                        <field name="vehicle_state" readonly="1"/>
                        <field name="odometer_vehicle" readonly="1"/>
                        <field name="odometer_last_execute" readonly="1"/>
                        <field name="service_type_id" readonly="1"/>
                        <field name="brand_id" readonly="1"/>
                        <field name="vehiculo_linea_id" readonly="1" domain="[('marca','=',brand_id)]"/>
                        <field name="branch_id" invisible="1"/>
                        <field name="programming_range" invisible="1"/>
                    </group>
                </sheet>
            </form>
            </field>
        </record>

        <record model="ir.actions.server" id="program_wizard_act">
            <field name="name">Generar Órdenes</field>
            <field name="model_id" ref="model_program_wizard"/>
            <field name="state">code</field>
            <field name="code">
                action = env['program.wizard'].browse(env.context['active_ids']).program_catalog()
            </field>
        </record>
                <!-- action = model.program_catalog(model) -->


        <record id="program_wizard_search" model="ir.ui.view">
            <field name="name">program.wizard.search</field>
            <field name="model">program.wizard</field>
            <field name="arch" type="xml">
                <search string="asset">
                    <field name="brand_id" filter_domain="[('brand_id','ilike',self)]" string="brand"/>
                    <field name="routines_id" filter_domain="[('routines_id','ilike',self)]" string="routines"/>
                    <field name="vehicle_id" filter_domain="[('vehicle_id','ilike',self)]" string="vehicle"/>
                    <field name="movil_nro" filter_domain="[('movil_nro','ilike',self)]" string="movil"/>
                    <field name="workorder_id" filter_domain="[('workorder_id','ilike',self)]" string="workorder"/>
              
                    <group expand="1" string="Group By">                    
                        <filter string="programming range" name="programming_range" context="{'group_by':'programming_range'}"/> 
                        <filter string="Garage" name="garage_id" context="{'group_by':'garage_id'}"/> 
                        <filter string="vehicle" name="vehicle_id" context="{'group_by':'vehicle_id'}"/>    
                        <filter string="movil" name="movil_nro" context="{'group_by':'movil_nro'}"/>
                        <filter string="trigger type" name="trigger_type" context="{'group_by':'trigger_type'}"/>
                        <filter string="vehicle state" name="vehicle_state" context="{'group_by':'vehicle_state'}"/>  
                        <filter string="service type" name="service_type_id" context="{'group_by':'service_type_id'}"/>    
                        <filter string="brand" name="brand_id" context="{'group_by':'brand_id'}"/>    
                        <filter string="vehiculo linea" name="vehiculo_linea_id" context="{'group_by':'vehiculo_linea_id'}"/>  
                        <filter string="routines" name="routines_id" context="{'group_by':'routines_id'}"/>            
                    </group>
                </search>
            </field>
        </record> 

        <record id="view_program_range_wizard_form" model="ir.ui.view">
            <field name="name">program.range.wizard.form</field>
            <field name="model">program.range.wizard</field>
            <field name="arch" type="xml">
                <form string="Select test">
                    <form string="Planeación Preventiva">
                        <separator string="Selección de filtros"/>
                        <group>
                            <field name="fleet_id"/>
                            <field name="garage_id"/>
                            <field name="programming_range"/>
                            <field name="service_type_id"/>
                        </group>
                        <footer>
                            <button name="open_program_wizard" string="Aceptar" type="object" class="oe_highlight"/>
                            or
                            <button special="cancel" class="oe_link" string="Cancelar" />
                        </footer>
                    </form>
                </form>
            </field>
        </record>

        <record id="action_program_range_wizard" model="ir.actions.act_window">
            <field name="name">Planeación preventiva</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">program.range.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

    </data>
</odoo>
