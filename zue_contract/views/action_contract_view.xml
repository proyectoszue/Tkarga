<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!-- Sequence prestamos para el campo name -->
    <record id="ir_seq_cntr_contract_encab" model="ir.sequence">
      <field name="name">Zue Contratos</field>
      <field name="code">cntr.contract.encab.seq</field>
      <field name="prefix">CT/%(range_year)s/</field>
      <field name="padding">7</field>
      <field name="number_increment">1</field>
      <field name="use_date_range">True</field>
      <field name="number_next_actual">1</field>
      <field name="implementation">standard</field>
    </record>         
    
    <record model="ir.actions.act_window" id="cntr_contract_encab_action">
        <field name="name">Contratos</field>
        <field name="res_model">cntr.contract.encab</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record model="ir.ui.view" id="zue_contract.list_cntr_contract_encab_action">
        <field name="name">zue lista contratos</field>
        <field name="model">cntr.contract.encab</field>
        <field name="arch" type="xml">
            <tree string="Contratos">
                <field name="name"/>
                <field name="customer_id"/>
                <field name="account_analytic_id"/>
                <field name="branch_id"/>
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="description"/>
            </tree>
        </field>
    </record>

    <record id="cntr_contract_logirastreo_search" model="ir.ui.view">
      <field name="name">cntr contract logirastreo search</field>
      <field name="model">cntr.contract.logirastreo</field>
      <field name="arch" type="xml">
        <search string="Contrato asociado Logirastreo">
          <field name="name" string="Nombre" filter_domain="['|',('name', 'ilike', self), ('code', 'ilike', self)]"/>
        </search>
      </field>
    </record>

    <record model="ir.ui.view" id="cntr_contract_encab_form_view"> 
        <field name="name">cntr.contract.encab.form.view</field>
        <field name="model">cntr.contract.encab</field>
        <field name="arch" type="xml">
          <form string="Formulario de contratos">
            <header>
              <button name="get_contract_services" type="object" string="Consultar servicios"/>
            </header>
            <sheet string="Workorder">
              <group>
                  <div class="oe_title">
                      <h1>
                          <field name="name" readonly="1"/>
                      </h1>
                  </div>
              </group>
              <separator/>
              <group>
                  <group>
                      <field name="customer_id"/>
                      <field name="account_analytic_id"/>
                      <field name="branch_id"/>
                  </group>
                  <group>
                      <field name="start_date"/> 
                      <field name="end_date"/>
                      <field name="contract_interface_id"/>
                      <field name="last_execution_date"/>                      
                  </group>
              </group>
              <separator/>
              <notebook>
                <page string="Detalle">
                  <field name="contract_participation_id">
                      <tree editable="bottom">
                          <field name="partner_id"/> 
                          <field name="participation_percent"/>
                          <field name="contract_encab_id" invisible="1"/>
                      </tree>
                  </field>
                </page>
                <page string="Servicios">
                    <field name="contract_service_id">
                        <tree editable="bottom">
                          <field name="service_type_id"/> 
                          <field name="billing_uom_id"/> 
                          <field name="unit_rate" widget="monetary"/>
                          <field name="periodicity_id"/>
                          <field name="product_id"/>
                          <field name="contract_encab_id" invisible="1"/>
                        </tree>
                    </field>
                </page>
                <page string="Servicios Ejecutados">
                    <field name="contract_service_detail_id">
                        <tree editable="bottom">
                          <field name="name"/> 
                          <field name="date"/>
                          <field name="service_id"/>
                          <field name="vehicle_id"/>
                          <field name="driver_id"/> 
                          <field name="customer_id"/> 
                          <field name="route"/> 
                          <field name="turn"/> 
                          <field name="start_date"/> 
                          <field name="end_date"/> 
                          <field name="programmed_distance"/> 
                          <field name="real_distance"/> 
                          <field name="passengers"/> 
                          <field name="branch_id"/> 
                          <field name="contract_id" invisible="1"/> 
                          <field name="contract_encab_id" invisible="1"/>
                        </tree>
                    </field>
                </page>
              </notebook>
              <separator/>
              <group>
                  <field name="description"/>
              </group> 
            </sheet>
          </form>
        </field>
    </record>
  </data>
</odoo>
